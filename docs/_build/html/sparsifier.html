
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Sparsifier &#8212; sparseklearn 0.1 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Welcome to sparseklearn’s documentation!" href="index.html" /> 
  </head>
  <body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to sparseklearn’s documentation!"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">sparseklearn 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-sparsifier">
<span id="sparsifier"></span><h1>Sparsifier<a class="headerlink" href="#module-sparsifier" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="sparsifier.Sparsifier">
<em class="property">class </em><code class="descclassname">sparsifier.</code><code class="descname">Sparsifier</code><span class="sig-paren">(</span><em>compression_target=1.0</em>, <em>alpha_target=0.0</em>, <em>transform='dct'</em>, <em>mask=None</em>, <em>precond_inds=None</em>, <em>data_dim=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sparsifier.Sparsifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Sparsifies input data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>compression_target</strong> : float or int, defaults to 1.0.</p>
<blockquote>
<div><p>The compression factor.</p>
</div></blockquote>
<p><strong>alpha_target</strong> : float or int, defaults to 0.0.</p>
<blockquote>
<div><p>The shared compression factor.</p>
</div></blockquote>
<p><strong>transform</strong> : {‘dct’, None},</p>
<blockquote>
<div><p>defaults to ‘dct’.
String describing the type of transform to use. This sets what to use for
the matrix H in the preconditioning transform HD. Any method other than
None will also use the diagonal D matrix (which can be set using the
precond_D parameter). Must be one of:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="s1">&#39;dct&#39;</span>  <span class="n">discrete</span> <span class="n">cosine</span> <span class="n">transform</span>
<span class="s1">&#39;None&#39;</span> <span class="n">no</span> <span class="n">transform</span>
</pre></div>
</div>
</div></blockquote>
<p><strong>mask</strong> : nd.array, shape (n_datapoints, dim_mask), optional</p>
<blockquote>
<div><p>defaults to None. The user-provided mask. If None, mask is
generated using the generate_mask method.</p>
</div></blockquote>
<p><strong>precond_D</strong> : nd.array, shape (n_datapoints,), optional</p>
<blockquote>
<div><p>defaults to None. The user-provided diagonal of the preconditioning matrix D. 
If None, generated using the generate_D method.</p>
</div></blockquote>
<p><strong>data_dim</strong> : int, required and allowed if and only if transform is ‘R’ or ‘RHD’</p>
<blockquote class="last">
<div><p>defaults to None. 
Dimension of each data point in the original, dense space. Will be taken
to be the number of columns of the data if the dense data is passed in.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>mask</strong></td>
<td>(array)</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#sparsifier.Sparsifier.apply_HD" title="sparsifier.Sparsifier.apply_HD"><code class="xref py py-obj docutils literal"><span class="pre">apply_HD</span></code></a>(X)</td>
<td>Apply the preconditioning transform to X.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sparsifier.Sparsifier.apply_mask" title="sparsifier.Sparsifier.apply_mask"><code class="xref py py-obj docutils literal"><span class="pre">apply_mask</span></code></a>(X)</td>
<td>Apply mask to X.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sparsifier.Sparsifier.fit_sparsifier" title="sparsifier.Sparsifier.fit_sparsifier"><code class="xref py py-obj docutils literal"><span class="pre">fit_sparsifier</span></code></a>([X,&nbsp;HDX,&nbsp;RHDX])</td>
<td>Fit the sparsifier to specified data.</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sparsifier.Sparsifier.invert_HD" title="sparsifier.Sparsifier.invert_HD"><code class="xref py py-obj docutils literal"><span class="pre">invert_HD</span></code></a>(HDX)</td>
<td>Invert the preconditioning transform HD that has been applied to X.</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sparsifier.Sparsifier.invert_mask_bool" title="sparsifier.Sparsifier.invert_mask_bool"><code class="xref py py-obj docutils literal"><span class="pre">invert_mask_bool</span></code></a>()</td>
<td>Returns P by N binary sparse matrix.</td>
</tr>
<tr class="row-even"><td><code class="xref py py-obj docutils literal"><span class="pre">pairwise_distances</span></code>([Y,&nbsp;W,&nbsp;transform_Y,&nbsp;…])</td>
<td></td>
</tr>
<tr class="row-odd"><td><code class="xref py py-obj docutils literal"><span class="pre">pick_K_datapoints</span></code>(K)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#sparsifier.Sparsifier.polynomial_combination" title="sparsifier.Sparsifier.polynomial_combination"><code class="xref py py-obj docutils literal"><span class="pre">polynomial_combination</span></code></a>(W[,&nbsp;power])</td>
<td>Computes sum_n (w[n,k] * (x[n] * iota[n] )**power</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#sparsifier.Sparsifier.write_HD" title="sparsifier.Sparsifier.write_HD"><code class="xref py py-obj docutils literal"><span class="pre">write_HD</span></code></a>(fHD,&nbsp;HDX,&nbsp;D_indices)</td>
<td>Writes HDX and D_indices to file fHD (D_indices are needed to invert the transformation).</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="sparsifier.Sparsifier.apply_HD">
<code class="descname">apply_HD</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#sparsifier.Sparsifier.apply_HD" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the preconditioning transform to X.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>X</strong> : nd.array, shape (n, P)</p>
<blockquote>
<div><p>The data to precondition. Each row is a datapoint.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>HDX</strong> : nd.array, shape (n, P)</p>
<blockquote class="last">
<div><p>The transformed data.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sparsifier.Sparsifier.apply_mask">
<code class="descname">apply_mask</code><span class="sig-paren">(</span><em>X</em><span class="sig-paren">)</span><a class="headerlink" href="#sparsifier.Sparsifier.apply_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply mask to X.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>X</strong> : nd.array, shape(nrows, P)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>RX</strong> : nd.array, shape(nrows, Q)</p>
<blockquote class="last">
<div><p>Masked X. The nth row of RX is X[n][mask[n]].</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sparsifier.Sparsifier.fit_sparsifier">
<code class="descname">fit_sparsifier</code><span class="sig-paren">(</span><em>X=None</em>, <em>HDX=None</em>, <em>RHDX=None</em><span class="sig-paren">)</span><a class="headerlink" href="#sparsifier.Sparsifier.fit_sparsifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the sparsifier to specified data. 
At least one of the parameters must be set.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>X</strong> : nd.array, shape (N, P), optional</p>
<blockquote>
<div><p>defaults to None. Dense, raw data.</p>
</div></blockquote>
<p><strong>HDX</strong> : nd.array, shape (N, P), optional</p>
<blockquote>
<div><p>defaults to None. Dense, transformed data.</p>
</div></blockquote>
<p><strong>RHDX</strong> : nd.array, shape (N, Q), optional</p>
<blockquote class="last">
<div><p>defaults to None. Subsampled, transformed data.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sparsifier.Sparsifier.invert_HD">
<code class="descname">invert_HD</code><span class="sig-paren">(</span><em>HDX</em><span class="sig-paren">)</span><a class="headerlink" href="#sparsifier.Sparsifier.invert_HD" title="Permalink to this definition">¶</a></dt>
<dd><p>Invert the preconditioning transform HD that has been applied to X.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>HDX</strong> : nd.array, shape (n, P)</p>
<blockquote>
<div><p>The preconditioned data. Each row is a datapoint.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>X</strong> : nd.array, shape (n, P)</p>
<blockquote class="last">
<div><p>The raw data.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sparsifier.Sparsifier.invert_mask_bool">
<code class="descname">invert_mask_bool</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#sparsifier.Sparsifier.invert_mask_bool" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns P by N binary sparse matrix. Each row indicates which
of the N data points has the pth dimension preserved in the mask.</p>
</dd></dl>

<dl class="method">
<dt id="sparsifier.Sparsifier.polynomial_combination">
<code class="descname">polynomial_combination</code><span class="sig-paren">(</span><em>W</em>, <em>power=1</em><span class="sig-paren">)</span><a class="headerlink" href="#sparsifier.Sparsifier.polynomial_combination" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes sum_n (w[n,k] * (x[n] * iota[n] )**power</p>
<p>W is self.N by K, so that the output has K rows, each of which
is a sum above using a column of w. This seems backwards.</p>
</dd></dl>

<dl class="method">
<dt id="sparsifier.Sparsifier.write_HD">
<code class="descname">write_HD</code><span class="sig-paren">(</span><em>fHD</em>, <em>HDX</em>, <em>D_indices</em><span class="sig-paren">)</span><a class="headerlink" href="#sparsifier.Sparsifier.write_HD" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes HDX and D_indices to file fHD (D_indices are needed to
invert the transformation).</p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Welcome to sparseklearn’s documentation!</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="index.html" title="Welcome to sparseklearn’s documentation!"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">sparseklearn 0.1 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Eric Kightley.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.5.
    </div>
  </body>
</html>